{"ast":null,"code":"import Surface from './surface';\nimport { transform } from '../geometry';\nimport Group from '../shapes/group';\nexport default function exportImage(group, options) {\n  var defaults = {\n    width: \"800px\",\n    height: \"600px\",\n    cors: \"Anonymous\"\n  };\n  var exportRoot = group;\n  var bbox = group.clippedBBox();\n\n  if (bbox) {\n    var origin = bbox.getOrigin();\n    exportRoot = new Group();\n    exportRoot.transform(transform().translate(-origin.x, -origin.y));\n    exportRoot.children.push(group);\n    var size = bbox.getSize();\n    defaults.width = size.width + \"px\";\n    defaults.height = size.height + \"px\";\n  }\n\n  var surfaceOptions = Object.assign(defaults, options);\n  var container = document.createElement(\"div\");\n  var style = container.style;\n  style.display = \"none\";\n  style.width = surfaceOptions.width;\n  style.height = surfaceOptions.height;\n  document.body.appendChild(container);\n  var surface = new Surface(container, surfaceOptions);\n  surface.suspendTracking();\n  surface.draw(exportRoot);\n  var promise = surface.image();\n\n  var destroy = function destroy() {\n    surface.destroy();\n    document.body.removeChild(container);\n  };\n\n  promise.then(destroy, destroy);\n  return promise;\n}","map":{"version":3,"sources":["/home/datquocngo/Project/UET/gts-fe/node_modules/@progress/kendo-drawing/dist/es2015/canvas/export-image.js"],"names":["Surface","transform","Group","exportImage","group","options","defaults","width","height","cors","exportRoot","bbox","clippedBBox","origin","getOrigin","translate","x","y","children","push","size","getSize","surfaceOptions","Object","assign","container","document","createElement","style","display","body","appendChild","surface","suspendTracking","draw","promise","image","destroy","removeChild","then"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,WAApB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,KAAP,MAAkB,iBAAlB;AAEA,eAAe,SAASC,WAAT,CAAqBC,KAArB,EAA4BC,OAA5B,EAAqC;AAChD,MAAMC,QAAQ,GAAG;AACbC,IAAAA,KAAK,EAAE,OADM;AACGC,IAAAA,MAAM,EAAE,OADX;AAEbC,IAAAA,IAAI,EAAE;AAFO,GAAjB;AAKA,MAAIC,UAAU,GAAGN,KAAjB;AACA,MAAMO,IAAI,GAAGP,KAAK,CAACQ,WAAN,EAAb;;AAGA,MAAID,IAAJ,EAAU;AACN,QAAME,MAAM,GAAGF,IAAI,CAACG,SAAL,EAAf;AACAJ,IAAAA,UAAU,GAAG,IAAIR,KAAJ,EAAb;AACAQ,IAAAA,UAAU,CAACT,SAAX,CAAqBA,SAAS,GAAGc,SAAZ,CAAsB,CAACF,MAAM,CAACG,CAA9B,EAAiC,CAACH,MAAM,CAACI,CAAzC,CAArB;AACAP,IAAAA,UAAU,CAACQ,QAAX,CAAoBC,IAApB,CAAyBf,KAAzB;AAEA,QAAMgB,IAAI,GAAGT,IAAI,CAACU,OAAL,EAAb;AACAf,IAAAA,QAAQ,CAACC,KAAT,GAAiBa,IAAI,CAACb,KAAL,GAAa,IAA9B;AACAD,IAAAA,QAAQ,CAACE,MAAT,GAAkBY,IAAI,CAACZ,MAAL,GAAc,IAAhC;AACH;;AAED,MAAMc,cAAc,GAAGC,MAAM,CAACC,MAAP,CAAclB,QAAd,EAAwBD,OAAxB,CAAvB;AAEA,MAAMoB,SAAS,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAlB;AACA,MAAMC,KAAK,GAAGH,SAAS,CAACG,KAAxB;AAEAA,EAAAA,KAAK,CAACC,OAAN,GAAgB,MAAhB;AACAD,EAAAA,KAAK,CAACrB,KAAN,GAAce,cAAc,CAACf,KAA7B;AACAqB,EAAAA,KAAK,CAACpB,MAAN,GAAec,cAAc,CAACd,MAA9B;AACAkB,EAAAA,QAAQ,CAACI,IAAT,CAAcC,WAAd,CAA0BN,SAA1B;AAEA,MAAMO,OAAO,GAAG,IAAIhC,OAAJ,CAAYyB,SAAZ,EAAuBH,cAAvB,CAAhB;AACAU,EAAAA,OAAO,CAACC,eAAR;AACAD,EAAAA,OAAO,CAACE,IAAR,CAAaxB,UAAb;AAEA,MAAMyB,OAAO,GAAGH,OAAO,CAACI,KAAR,EAAhB;;AACA,MAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClBL,IAAAA,OAAO,CAACK,OAAR;AACAX,IAAAA,QAAQ,CAACI,IAAT,CAAcQ,WAAd,CAA0Bb,SAA1B;AACH,GAHD;;AAIAU,EAAAA,OAAO,CAACI,IAAR,CAAaF,OAAb,EAAsBA,OAAtB;AAEA,SAAOF,OAAP;AACH","sourcesContent":["import Surface from './surface';\nimport { transform } from '../geometry';\nimport Group from '../shapes/group';\n\nexport default function exportImage(group, options) {\n    const defaults = {\n        width: \"800px\", height: \"600px\",\n        cors: \"Anonymous\"\n    };\n\n    let exportRoot = group;\n    const bbox = group.clippedBBox();\n\n\n    if (bbox) {\n        const origin = bbox.getOrigin();\n        exportRoot = new Group();\n        exportRoot.transform(transform().translate(-origin.x, -origin.y));\n        exportRoot.children.push(group);\n\n        const size = bbox.getSize();\n        defaults.width = size.width + \"px\";\n        defaults.height = size.height + \"px\";\n    }\n\n    const surfaceOptions = Object.assign(defaults, options);\n\n    const container = document.createElement(\"div\");\n    const style = container.style;\n\n    style.display = \"none\";\n    style.width = surfaceOptions.width;\n    style.height = surfaceOptions.height;\n    document.body.appendChild(container);\n\n    const surface = new Surface(container, surfaceOptions);\n    surface.suspendTracking();\n    surface.draw(exportRoot);\n\n    const promise = surface.image();\n    const destroy = () => {\n        surface.destroy();\n        document.body.removeChild(container);\n    };\n    promise.then(destroy, destroy);\n\n    return promise;\n}"]},"metadata":{},"sourceType":"module"}