{"ast":null,"code":"import _classCallCheck from \"/home/datquocngo/Project/Hung/gts-fe/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/datquocngo/Project/Hung/gts-fe/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/datquocngo/Project/Hung/gts-fe/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/datquocngo/Project/Hung/gts-fe/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport LRUCache from './lru-cache';\nimport { Class } from '../common';\nimport { objectKey, hashKey, normalizeText } from './util';\n\nfunction zeroSize() {\n  return {\n    width: 0,\n    height: 0,\n    baseline: 0\n  };\n}\n\nvar DEFAULT_OPTIONS = {\n  baselineMarkerSize: 1\n};\nvar defaultMeasureBox;\n\nif (typeof document !== \"undefined\") {\n  defaultMeasureBox = document.createElement(\"div\");\n  defaultMeasureBox.style.cssText = \"position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;\" + \"padding: 0 !important; margin: 0 !important; border: 0 !important;\" + \"line-height: normal !important; visibility: hidden !important; white-space: pre!important;\";\n}\n\nvar TextMetrics = /*#__PURE__*/function (_Class) {\n  _inherits(TextMetrics, _Class);\n\n  var _super = _createSuper(TextMetrics);\n\n  function TextMetrics(options) {\n    var _this;\n\n    _classCallCheck(this, TextMetrics);\n\n    _this = _super.call(this);\n    _this._cache = new LRUCache(1000);\n    _this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    return _this;\n  }\n\n  _createClass(TextMetrics, [{\n    key: \"measure\",\n    value: function measure(text, style) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (typeof text === 'undefined' || text === null) {\n        return zeroSize();\n      }\n\n      var styleKey = objectKey(style);\n      var cacheKey = hashKey(text + styleKey);\n\n      var cachedResult = this._cache.get(cacheKey);\n\n      if (cachedResult) {\n        return cachedResult;\n      }\n\n      var size = zeroSize();\n      var measureBox = options.box || defaultMeasureBox;\n\n      var baselineMarker = this._baselineMarker().cloneNode(false);\n\n      for (var key in style) {\n        var value = style[key];\n\n        if (typeof value !== \"undefined\") {\n          measureBox.style[key] = value;\n        }\n      }\n\n      var textStr = options.normalizeText !== false ? normalizeText(text) : String(text);\n      measureBox.textContent = textStr;\n      measureBox.appendChild(baselineMarker);\n      document.body.appendChild(measureBox);\n\n      if (textStr.length) {\n        size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\n        size.height = measureBox.offsetHeight;\n        size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\n      }\n\n      if (size.width > 0 && size.height > 0) {\n        this._cache.put(cacheKey, size);\n      }\n\n      measureBox.parentNode.removeChild(measureBox);\n      return size;\n    }\n  }, {\n    key: \"_baselineMarker\",\n    value: function _baselineMarker() {\n      var marker = document.createElement(\"div\");\n      marker.style.cssText = \"display: inline-block; vertical-align: baseline;width: \" + this.options.baselineMarkerSize + \"px; height: \" + this.options.baselineMarkerSize + \"px;overflow: hidden;\";\n      return marker;\n    }\n  }]);\n\n  return TextMetrics;\n}(Class);\n\nTextMetrics.current = new TextMetrics();\nexport default TextMetrics;","map":{"version":3,"sources":["/home/datquocngo/Project/Hung/gts-fe/node_modules/@progress/kendo-drawing/dist/es2015/text-metrics/text-metrics.js"],"names":["LRUCache","Class","objectKey","hashKey","normalizeText","zeroSize","width","height","baseline","DEFAULT_OPTIONS","baselineMarkerSize","defaultMeasureBox","document","createElement","style","cssText","TextMetrics","options","_cache","Object","assign","text","styleKey","cacheKey","cachedResult","get","size","measureBox","box","baselineMarker","_baselineMarker","cloneNode","key","value","textStr","String","textContent","appendChild","body","length","offsetWidth","offsetHeight","offsetTop","put","parentNode","removeChild","marker","current"],"mappings":"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","sourcesContent":["import LRUCache from './lru-cache';\nimport { Class } from '../common';\nimport { objectKey, hashKey, normalizeText } from './util';\n\nfunction zeroSize() {\n    return { width: 0, height: 0, baseline: 0 };\n}\n\nconst DEFAULT_OPTIONS = {\n    baselineMarkerSize: 1\n};\n\nlet defaultMeasureBox;\n\nif (typeof document !== \"undefined\") {\n    defaultMeasureBox = document.createElement(\"div\");\n    defaultMeasureBox.style.cssText = \"position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;\" +\n              \"padding: 0 !important; margin: 0 !important; border: 0 !important;\" +\n              \"line-height: normal !important; visibility: hidden !important; white-space: pre!important;\";\n}\n\nclass TextMetrics extends Class {\n    constructor(options) {\n        super();\n\n        this._cache = new LRUCache(1000);\n        this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    }\n\n    measure(text, style, options = {}) {\n        if (typeof text === 'undefined' || text === null) {\n            return zeroSize();\n        }\n\n        const styleKey = objectKey(style);\n        const cacheKey = hashKey(text + styleKey);\n        const cachedResult = this._cache.get(cacheKey);\n\n        if (cachedResult) {\n            return cachedResult;\n        }\n\n        const size = zeroSize();\n        const measureBox = options.box || defaultMeasureBox;\n        const baselineMarker = this._baselineMarker().cloneNode(false);\n\n        for (let key in style) {\n            let value = style[key];\n            if (typeof value !== \"undefined\") {\n                measureBox.style[key] = value;\n            }\n        }\n\n        const textStr = options.normalizeText !== false ? normalizeText(text) : String(text);\n\n        measureBox.textContent = textStr;\n        measureBox.appendChild(baselineMarker);\n        document.body.appendChild(measureBox);\n\n        if (textStr.length) {\n            size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\n            size.height = measureBox.offsetHeight;\n            size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\n        }\n\n        if (size.width > 0 && size.height > 0) {\n            this._cache.put(cacheKey, size);\n        }\n\n        measureBox.parentNode.removeChild(measureBox);\n\n        return size;\n    }\n\n    _baselineMarker() {\n        const marker = document.createElement(\"div\");\n        marker.style.cssText = \"display: inline-block; vertical-align: baseline;width: \" +\n            this.options.baselineMarkerSize + \"px; height: \" + this.options.baselineMarkerSize + \"px;overflow: hidden;\";\n\n        return marker;\n    }\n}\n\nTextMetrics.current = new TextMetrics();\n\nexport default TextMetrics;\n"]},"metadata":{},"sourceType":"module"}