{"ast":null,"code":"import { localeInfo, localeCurrency, currencyDisplays } from '../cldr';\nimport { PERCENT, NUMBER_PLACEHOLDER, CURRENCY_PLACEHOLDER, DEFAULT_LOCALE, EMPTY, POINT } from '../common/constants';\nimport { setStyleOptions, setFormatLiterals } from './utils';\nimport isNumber from '../common/is-number';\nimport isCurrencyStyle from './is-currency-style';\nimport formatOptions from './format-options';\nimport isString from '../common/is-string';\nvar exponentRegExp = /[eE][\\-+]?[0-9]+/;\nvar nonBreakingSpaceRegExp = /\\u00A0/g;\n\nfunction cleanNegativePattern(number, patterns) {\n  if (patterns.length > 1) {\n    var parts = (patterns[1] || EMPTY).replace(CURRENCY_PLACEHOLDER, EMPTY).split(NUMBER_PLACEHOLDER);\n\n    if (number.indexOf(parts[0]) > -1 && number.indexOf(parts[1]) > -1) {\n      return number.replace(parts[0], EMPTY).replace(parts[1], EMPTY);\n    }\n  }\n}\n\nfunction cleanCurrencyNumber(value, info, format) {\n  var options = formatOptions(format) || {};\n  var isCurrency = isCurrencyStyle(options.style);\n  var number = value;\n  var negative;\n  var currency = options.currency || localeCurrency(info, isCurrency);\n\n  if (currency) {\n    var displays = currencyDisplays(info, currency, isCurrency);\n\n    if (displays) {\n      for (var idx = 0; idx < displays.length; idx++) {\n        var display = displays[idx];\n\n        if (number.includes(display)) {\n          number = number.replace(display, EMPTY);\n          isCurrency = true;\n          break;\n        }\n      }\n    }\n\n    if (isCurrency) {\n      var cleanNumber = cleanNegativePattern(number, info.numbers.currency.patterns) || cleanNegativePattern(number, info.numbers.accounting.patterns);\n\n      if (cleanNumber) {\n        negative = true;\n        number = cleanNumber;\n      }\n    }\n  }\n\n  return {\n    number: number,\n    negative: negative\n  };\n}\n\nfunction cleanLiterals(number, formatOptions) {\n  var literals = formatOptions.literals;\n  var result = number;\n\n  if (literals) {\n    for (var idx = 0; idx < literals.length; idx++) {\n      result = result.replace(literals[idx], EMPTY);\n    }\n  }\n\n  return result;\n}\n\nexport default function parseNumber(value) {\n  var locale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_LOCALE;\n  var format = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (!value && value !== 0) {\n    return null;\n  }\n\n  if (isNumber(value)) {\n    return value;\n  }\n\n  var info = localeInfo(locale);\n  var symbols = info.numbers.symbols;\n  var number = value.toString();\n  var formatOptions = format || {};\n  var isPercent;\n\n  if (isString(format)) {\n    formatOptions = {\n      format: format\n    };\n    setFormatLiterals(formatOptions);\n    number = cleanLiterals(number, formatOptions);\n    setStyleOptions(formatOptions, info);\n  }\n\n  if (formatOptions.style === PERCENT || number.indexOf(symbols.percentSign) > -1) {\n    number = number.replace(symbols.percentSign, EMPTY);\n    isPercent = true;\n  }\n\n  if (exponentRegExp.test(number)) {\n    number = parseFloat(number.replace(symbols.decimal, POINT));\n    return isNaN(number) ? null : number;\n  }\n\n  var _cleanCurrencyNumber = cleanCurrencyNumber(number, info, formatOptions),\n      negativeCurrency = _cleanCurrencyNumber.negative,\n      currencyNumber = _cleanCurrencyNumber.number;\n\n  number = String(currencyNumber).trim();\n  var negativeSignIndex = number.indexOf(\"-\");\n\n  if (negativeSignIndex > 0) {\n    return null;\n  }\n\n  var isNegative = negativeSignIndex > -1;\n  isNegative = negativeCurrency !== undefined ? negativeCurrency : isNegative;\n  number = number.replace(\"-\", EMPTY).replace(nonBreakingSpaceRegExp, \" \").split(symbols.group.replace(nonBreakingSpaceRegExp, \" \")).join(EMPTY).replace(symbols.decimal, POINT);\n  number = parseFloat(number);\n\n  if (isNaN(number)) {\n    number = null;\n  } else if (isNegative) {\n    number *= -1;\n  }\n\n  if (number && isPercent) {\n    number /= 100;\n  }\n\n  return number;\n}","map":{"version":3,"sources":["/home/datquocngo/Project/Hung/gts-fe/node_modules/@telerik/kendo-intl/dist/es2015/numbers/parse-number.js"],"names":["localeInfo","localeCurrency","currencyDisplays","PERCENT","NUMBER_PLACEHOLDER","CURRENCY_PLACEHOLDER","DEFAULT_LOCALE","EMPTY","POINT","setStyleOptions","setFormatLiterals","isNumber","isCurrencyStyle","formatOptions","isString","exponentRegExp","nonBreakingSpaceRegExp","cleanNegativePattern","number","patterns","length","parts","replace","split","indexOf","cleanCurrencyNumber","value","info","format","options","isCurrency","style","negative","currency","displays","idx","display","includes","cleanNumber","numbers","accounting","cleanLiterals","literals","result","parseNumber","locale","symbols","toString","isPercent","percentSign","test","parseFloat","decimal","isNaN","negativeCurrency","currencyNumber","String","trim","negativeSignIndex","isNegative","undefined","group","join"],"mappings":"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","sourcesContent":["import { localeInfo, localeCurrency, currencyDisplays } from '../cldr';\nimport { PERCENT, NUMBER_PLACEHOLDER, CURRENCY_PLACEHOLDER, DEFAULT_LOCALE, EMPTY, POINT } from '../common/constants';\nimport { setStyleOptions, setFormatLiterals } from './utils';\nimport isNumber from '../common/is-number';\nimport isCurrencyStyle from './is-currency-style';\nimport formatOptions from './format-options';\nimport isString from '../common/is-string';\n\nconst exponentRegExp = /[eE][\\-+]?[0-9]+/;\nconst nonBreakingSpaceRegExp = /\\u00A0/g;\n\nfunction cleanNegativePattern(number, patterns) {\n    if (patterns.length > 1) {\n        const parts = (patterns[1] || EMPTY).replace(CURRENCY_PLACEHOLDER, EMPTY).split(NUMBER_PLACEHOLDER);\n        if (number.indexOf(parts[0]) > -1 && number.indexOf(parts[1]) > -1) {\n            return number.replace(parts[0], EMPTY).replace(parts[1], EMPTY);\n        }\n    }\n}\n\nfunction cleanCurrencyNumber(value, info, format) {\n    const options = formatOptions(format) || {};\n    let isCurrency = isCurrencyStyle(options.style);\n    let number = value;\n    let negative;\n\n    const currency = options.currency || localeCurrency(info, isCurrency);\n\n    if (currency) {\n        const displays = currencyDisplays(info, currency, isCurrency);\n        if (displays) {\n            for (let idx = 0; idx < displays.length; idx++) {\n                let display = displays[idx];\n                if (number.includes(display)) {\n                    number = number.replace(display, EMPTY);\n                    isCurrency = true;\n                    break;\n                }\n            }\n        }\n\n        if (isCurrency) {\n            const cleanNumber = cleanNegativePattern(number, info.numbers.currency.patterns) ||\n                cleanNegativePattern(number, info.numbers.accounting.patterns);\n\n            if (cleanNumber) {\n                negative = true;\n                number = cleanNumber;\n            }\n\n        }\n    }\n\n    return {\n        number: number,\n        negative: negative\n    };\n}\n\nfunction cleanLiterals(number, formatOptions) {\n    const literals = formatOptions.literals;\n    let result = number;\n\n    if (literals) {\n        for (let idx = 0; idx < literals.length; idx++) {\n            result = result.replace(literals[idx], EMPTY);\n        }\n    }\n\n    return result;\n}\n\nexport default function parseNumber(value, locale = DEFAULT_LOCALE, format = {}) {\n    if (!value && value !== 0) {\n        return null;\n    }\n\n    if (isNumber(value)) {\n        return value;\n    }\n\n    const info = localeInfo(locale);\n    const symbols = info.numbers.symbols;\n\n    let number = value.toString();\n    let formatOptions = format || {};\n    let isPercent;\n\n    if (isString(format)) {\n        formatOptions = { format: format };\n        setFormatLiterals(formatOptions);\n        number = cleanLiterals(number, formatOptions);\n\n        setStyleOptions(formatOptions, info);\n    }\n\n    if (formatOptions.style === PERCENT || number.indexOf(symbols.percentSign) > -1) {\n        number = number.replace(symbols.percentSign, EMPTY);\n        isPercent = true;\n    }\n\n    if (exponentRegExp.test(number)) {\n        number = parseFloat(number.replace(symbols.decimal, POINT));\n        return isNaN(number) ? null : number;\n    }\n\n    const { negative: negativeCurrency, number: currencyNumber } = cleanCurrencyNumber(number, info, formatOptions);\n    number = String(currencyNumber).trim();\n\n    const negativeSignIndex = number.indexOf(\"-\");\n    if (negativeSignIndex > 0) {\n        return null;\n    }\n\n    let isNegative = negativeSignIndex > -1;\n\n    isNegative = negativeCurrency !== undefined ? negativeCurrency : isNegative;\n\n    number = number.replace(\"-\", EMPTY)\n          .replace(nonBreakingSpaceRegExp, \" \")\n          .split(symbols.group.replace(nonBreakingSpaceRegExp, \" \")).join(EMPTY)\n          .replace(symbols.decimal, POINT);\n\n    number = parseFloat(number);\n\n    if (isNaN(number)) {\n        number = null;\n    } else if (isNegative) {\n        number *= -1;\n    }\n\n    if (number && isPercent) {\n        number /= 100;\n    }\n\n    return number;\n}\n"]},"metadata":{},"sourceType":"module"}