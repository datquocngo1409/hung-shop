{"ast":null,"code":"import _classCallCheck from \"/home/datquocngo/Project/UET/gts-fe/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/datquocngo/Project/UET/gts-fe/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/datquocngo/Project/UET/gts-fe/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"/home/datquocngo/Project/UET/gts-fe/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"/home/datquocngo/Project/UET/gts-fe/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/datquocngo/Project/UET/gts-fe/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/datquocngo/Project/UET/gts-fe/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport GroupNode from './group-node';\nimport traversable from '../mixins/traversable';\nimport { animationFrame, throttle } from '../common';\nvar FRAME_DELAY = 1000 / 60;\n\nvar RootNode = /*#__PURE__*/function (_traversable) {\n  _inherits(RootNode, _traversable);\n\n  var _super = _createSuper(RootNode);\n\n  function RootNode(canvas, size) {\n    var _this;\n\n    _classCallCheck(this, RootNode);\n\n    _this = _super.call(this);\n    _this.canvas = canvas;\n    _this.size = size;\n    _this.ctx = canvas.getContext(\"2d\");\n\n    var invalidateHandler = _this._invalidate.bind(_assertThisInitialized(_this));\n\n    _this.invalidate = throttle(function () {\n      animationFrame(invalidateHandler);\n    }, FRAME_DELAY);\n    return _this;\n  }\n\n  _createClass(RootNode, [{\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(RootNode.prototype), \"destroy\", this).call(this);\n\n      this.canvas = null;\n      this.ctx = null;\n    }\n  }, {\n    key: \"load\",\n    value: function load(elements, pos, cors) {\n      this.loadElements(elements, pos, cors);\n\n      this._invalidate();\n    }\n  }, {\n    key: \"_rescale\",\n    value: function _rescale(scale) {\n      var canvas = this.canvas,\n          size = this.size;\n      canvas.width = size.width * scale;\n      canvas.height = size.height * scale;\n      this.ctx.scale(scale, scale);\n    }\n  }, {\n    key: \"_devicePixelRatio\",\n    value: function _devicePixelRatio() {\n      if (window.devicePixelRatio === 'number') {\n        return window.devicePixelRatio;\n      }\n\n      return 1;\n    }\n  }, {\n    key: \"_invalidate\",\n    value: function _invalidate(options) {\n      if (!this.ctx) {\n        return;\n      }\n\n      var fixedScale = options && options.fixedScale;\n      var scale = fixedScale ? 1 : this._devicePixelRatio();\n\n      this._rescale(scale);\n\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      this.renderTo(this.ctx);\n    }\n  }]);\n\n  return RootNode;\n}(traversable(GroupNode, \"childNodes\"));\n\nexport default RootNode;","map":{"version":3,"sources":["/home/datquocngo/Project/UET/gts-fe/node_modules/@progress/kendo-drawing/dist/es2015/canvas/root-node.js"],"names":["GroupNode","traversable","animationFrame","throttle","FRAME_DELAY","RootNode","canvas","size","ctx","getContext","invalidateHandler","_invalidate","bind","invalidate","elements","pos","cors","loadElements","scale","width","height","window","devicePixelRatio","options","fixedScale","_devicePixelRatio","_rescale","clearRect","renderTo"],"mappings":";;;;;;;AAAA,OAAOA,SAAP,MAAsB,cAAtB;AACA,OAAOC,WAAP,MAAwB,uBAAxB;AACA,SAASC,cAAT,EAAyBC,QAAzB,QAAyC,WAAzC;AAGA,IAAMC,WAAW,GAAG,OAAO,EAA3B;;IAEMC,Q;;;;;AACF,oBAAYC,MAAZ,EAAoBC,IAApB,EAA0B;AAAA;;AAAA;;AACtB;AAEA,UAAKD,MAAL,GAAcA,MAAd;AACA,UAAKC,IAAL,GAAYA,IAAZ;AACA,UAAKC,GAAL,GAAWF,MAAM,CAACG,UAAP,CAAkB,IAAlB,CAAX;;AAEA,QAAMC,iBAAiB,GAAG,MAAKC,WAAL,CAAiBC,IAAjB,+BAA1B;;AACA,UAAKC,UAAL,GAAkBV,QAAQ,CAAC,YAAM;AAC7BD,MAAAA,cAAc,CAACQ,iBAAD,CAAd;AACH,KAFyB,EAEvBN,WAFuB,CAA1B;AARsB;AAWzB;;;;8BAES;AACN;;AACA,WAAKE,MAAL,GAAc,IAAd;AACA,WAAKE,GAAL,GAAW,IAAX;AACH;;;yBAEIM,Q,EAAUC,G,EAAKC,I,EAAM;AACtB,WAAKC,YAAL,CAAkBH,QAAlB,EAA4BC,GAA5B,EAAiCC,IAAjC;;AACA,WAAKL,WAAL;AACH;;;6BAEQO,K,EAAO;AAAA,UACJZ,MADI,GACa,IADb,CACJA,MADI;AAAA,UACIC,IADJ,GACa,IADb,CACIA,IADJ;AAEZD,MAAAA,MAAM,CAACa,KAAP,GAAeZ,IAAI,CAACY,KAAL,GAAaD,KAA5B;AACAZ,MAAAA,MAAM,CAACc,MAAP,GAAgBb,IAAI,CAACa,MAAL,GAAcF,KAA9B;AACA,WAAKV,GAAL,CAASU,KAAT,CAAeA,KAAf,EAAsBA,KAAtB;AACH;;;wCAEmB;AAChB,UAAIG,MAAM,CAACC,gBAAP,KAA4B,QAAhC,EAA0C;AACtC,eAAOD,MAAM,CAACC,gBAAd;AACH;;AAED,aAAO,CAAP;AACH;;;gCAEWC,O,EAAS;AACjB,UAAI,CAAC,KAAKf,GAAV,EAAe;AACX;AACH;;AAED,UAAMgB,UAAU,GAAGD,OAAO,IAAIA,OAAO,CAACC,UAAtC;AACA,UAAMN,KAAK,GAAGM,UAAU,GAAG,CAAH,GAAO,KAAKC,iBAAL,EAA/B;;AACA,WAAKC,QAAL,CAAcR,KAAd;;AAEA,WAAKV,GAAL,CAASmB,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAKrB,MAAL,CAAYa,KAArC,EAA4C,KAAKb,MAAL,CAAYc,MAAxD;AACA,WAAKQ,QAAL,CAAc,KAAKpB,GAAnB;AACH;;;;EAnDkBP,WAAW,CAACD,SAAD,EAAY,YAAZ,C;;AAsDlC,eAAeK,QAAf","sourcesContent":["import GroupNode from './group-node';\nimport traversable from '../mixins/traversable';\nimport { animationFrame, throttle } from '../common';\n\n\nconst FRAME_DELAY = 1000 / 60;\n\nclass RootNode extends traversable(GroupNode, \"childNodes\") {\n    constructor(canvas, size) {\n        super();\n\n        this.canvas = canvas;\n        this.size = size;\n        this.ctx = canvas.getContext(\"2d\");\n\n        const invalidateHandler = this._invalidate.bind(this);\n        this.invalidate = throttle(() => {\n            animationFrame(invalidateHandler);\n        }, FRAME_DELAY);\n    }\n\n    destroy() {\n        super.destroy();\n        this.canvas = null;\n        this.ctx = null;\n    }\n\n    load(elements, pos, cors) {\n        this.loadElements(elements, pos, cors);\n        this._invalidate();\n    }\n\n    _rescale(scale) {\n        const { canvas, size } = this;\n        canvas.width = size.width * scale;\n        canvas.height = size.height * scale;\n        this.ctx.scale(scale, scale);\n    }\n\n    _devicePixelRatio() {\n        if (window.devicePixelRatio === 'number') {\n            return window.devicePixelRatio;\n        }\n\n        return 1;\n    }\n\n    _invalidate(options) {\n        if (!this.ctx) {\n            return;\n        }\n\n        const fixedScale = options && options.fixedScale;\n        const scale = fixedScale ? 1 : this._devicePixelRatio();\n        this._rescale(scale);\n\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        this.renderTo(this.ctx);\n    }\n}\n\nexport default RootNode;\n"]},"metadata":{},"sourceType":"module"}