!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("ngx-tour-core"),require("@angular/material/menu"),require("@angular/common"),require("@angular/material/button"),require("@angular/material/card"),require("@angular/material/icon"),require("withinviewport"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ngx-tour-md-menu",["exports","@angular/core","ngx-tour-core","@angular/material/menu","@angular/common","@angular/material/button","@angular/material/card","@angular/material/icon","withinviewport","rxjs/operators"],e):e((t=t||self)["ngx-tour-md-menu"]={},t.ng.core,t.ngxTourCore,t.ng.material.menu,t.ng.common,t.ng.material.button,t.ng.material.card,t.ng.material.icon,t.withinviewport,t.rxjs.operators)}(this,(function(t,e,n,r,o,i,a,u,s,c){"use strict";s=s&&s.hasOwnProperty("default")?s.default:s;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function l(t,e){function n(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function m(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}var g=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return l(n,t),n.decorators=[{type:e.Injectable}],n}(n.TourService),f=function(){function t(){this.menu=new r.MatMenu(void 0,void 0,{xPosition:"after",yPosition:"below",overlapTrigger:!0,backdropClass:""})}return t.decorators=[{type:e.Component,args:[{selector:"tourAnchorOpener",template:'\n    <span [matMenuTriggerFor]="menu" #trigger="matMenuTrigger"></span>\n  ',styles:["\n      :host {\n        display: none;\n      }\n    "]}]}],t.propDecorators={menu:[{type:e.Input}],trigger:[{type:e.ViewChild,args:[r.MatMenuTrigger,{static:!1}]}]},t}();var v=function(){function t(){}return t.decorators=[{type:e.Injectable}],t}();var y=function(){function t(t){this.renderer=t.createRenderer(null,null)}return t.prototype.show=function(t){var e=t.nativeElement.getBoundingClientRect();this.backdropElement||(this.backdropElement=this.renderer.createElement("div"),this.renderer.addClass(this.backdropElement,"ngx-tour_backdrop"),this.renderer.appendChild(document.body,this.backdropElement)),this.setStyles(e)},t.prototype.close=function(){this.backdropElement&&(this.renderer.removeChild(document.body,this.backdropElement),this.backdropElement=null)},t.prototype.setStyles=function(t){var e,n,r={position:"fixed",width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px","box-shadow":"0 0 0 9999px rgba(0, 0, 0, 0.7)","z-index":"100"};try{for(var o=m(Object.keys(r)),i=o.next();!i.done;i=o.next()){var a=i.value;this.renderer.setStyle(this.backdropElement,a,r[a])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.RendererFactory2}]},t}();var b=function(){function t(t,e,n,r,o,i,a){this.componentFactoryResolver=t,this.injector=e,this.viewContainer=n,this.element=r,this.tourService=o,this.tourStepTemplate=i,this.tourBackdrop=a,this.opener=this.viewContainer.createComponent(this.componentFactoryResolver.resolveComponentFactory(f)).instance}return t.prototype.ngOnInit=function(){this.tourService.register(this.tourAnchor,this)},t.prototype.ngOnDestroy=function(){this.tourService.unregister(this.tourAnchor)},t.prototype.showTourStep=function(t){var e=this;this.isActive=!0,this.tourStepTemplate.templateComponent.step=t,t.preventScrolling||(s(this.element.nativeElement,{sides:"bottom"})?s(this.element.nativeElement,{sides:"left top right"})||this.element.nativeElement.scrollIntoView(!0):this.element.nativeElement.scrollIntoView(!1)),this.opener.trigger._element=this.element,this.opener.trigger.menu=this.tourStepTemplate.templateComponent.tourStep,this.opener.trigger.ngAfterContentInit(),this.opener.trigger.openMenu(),t.enableBackdrop?this.tourBackdrop.show(this.element):this.tourBackdrop.close(),t.prevBtnTitle=t.prevBtnTitle||"Prev",t.nextBtnTitle=t.nextBtnTitle||"Next",t.endBtnTitle=t.endBtnTitle||"End",this.menuCloseSubscription&&this.menuCloseSubscription.unsubscribe(),this.menuCloseSubscription=this.opener.trigger.menuClosed.pipe(c.first()).subscribe((function(){e.tourService.getStatus()!==n.TourState.OFF&&e.tourService.end(),e.tourBackdrop.close()}))},t.prototype.hideTourStep=function(){this.isActive=!1,this.menuCloseSubscription&&this.menuCloseSubscription.unsubscribe(),this.opener.trigger.closeMenu(),this.tourService.getStatus()===n.TourState.OFF&&this.tourBackdrop.close()},t.decorators=[{type:e.Directive,args:[{selector:"[tourAnchor]"}]}],t.ctorParameters=function(){return[{type:e.ComponentFactoryResolver},{type:e.Injector},{type:e.ViewContainerRef},{type:e.ElementRef},{type:g},{type:v},{type:y}]},t.propDecorators={tourAnchor:[{type:e.Input}],isActive:[{type:e.HostBinding,args:["class.touranchor--is-active"]}]},t}();var S=function(t){function n(e,n){var r=t.call(this,n)||this;return r.tourStepTemplateService=e,r.tourService=n,r.step={},r}return l(n,t),n.prototype.ngAfterViewInit=function(){this.tourStepTemplateService.templateComponent=this},n.decorators=[{type:e.Component,args:[{selector:"tour-step-template",template:'\n    <mat-menu [overlapTrigger]="false" class="tour-step">\n      <ng-container\n        *ngTemplateOutlet="\n          stepTemplate || stepTemplateContent || defaultTemplate;\n          context: { step: step }\n        "\n      ></ng-container>\n    </mat-menu>\n    <ng-template #defaultTemplate let-step="step">\n      <mat-card (click)="$event.stopPropagation()">\n        <mat-card-title>\n          {{ step?.title }}\n        </mat-card-title>\n        <mat-card-content>\n          {{ step?.content }}\n        </mat-card-content>\n        <mat-card-actions>\n          <button\n            mat-icon-button\n            [disabled]="!tourService.hasPrev(step)"\n            (click)="tourService.prev()"\n          >\n            <mat-icon>chevron_left</mat-icon>\n          </button>\n          <button\n            mat-icon-button\n            [disabled]="!tourService.hasNext(step)"\n            (click)="tourService.next()"\n          >\n            <mat-icon>chevron_right</mat-icon>\n          </button>\n          <button mat-button (click)="tourService.end()">\n            {{ step?.endBtnTitle }}\n          </button>\n        </mat-card-actions>\n      </mat-card>\n    </ng-template>\n  ',styles:["\n      ::ng-deep .tour-step .mat-menu-content {\n        padding: 0 !important;\n      }\n    "]}]}],n.ctorParameters=function(){return[{type:v},{type:g}]},n.propDecorators={tourStep:[{type:e.ViewChild,args:[r.MatMenu,{static:!1}]}],stepTemplate:[{type:e.Input}],stepTemplateContent:[{type:e.ContentChild,args:[e.TemplateRef,{static:!1}]}]},n}(n.TourHotkeyListenerComponent);var T=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:h([v,y],n.TourModule.forRoot().providers,[g])}},t.decorators=[{type:e.NgModule,args:[{declarations:[b,S,f],entryComponents:[f],exports:[b,S,n.TourModule],imports:[o.CommonModule,n.TourModule,r.MatMenuModule,a.MatCardModule,i.MatButtonModule,u.MatIconModule]}]}],t}();t.TourAnchorMatMenuDirective=b,t.TourMatMenuModule=T,t.TourService=g,t.TourStepTemplateComponent=S,t.ɵa=g,t.ɵb=v,t.ɵc=y,t.ɵd=f,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-tour-md-menu.umd.min.js.map